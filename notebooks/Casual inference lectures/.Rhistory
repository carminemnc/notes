y=polviews+rnorm(n=sum(W=w),sd=.1))) +
geom_point(size=2,color='#0085A1',alpha=0.3) +
facet_wrap(
vars(ifelse(w,'Controllo','Trattamento'))
) +
labs(title="Distribuzione dell'outcome in un contesto reale",
x="Age",
y="Polviews") +
theme(
# Set black background
plot.background = element_rect(fill = "#242728"),
panel.background = element_rect(fill = "#242728"),
# Set white text for all elements
text = element_text(color = "white"),
axis.text = element_text(color = "white"),
axis.title = element_text(color = "white"),
# Set green facet wrap labels
strip.background = element_rect(fill = "#242728"),
strip.text = element_text(color = "green", face = "bold"),
# Optional: adjust grid lines for better visibility
panel.grid.major = element_line(color = "grey30"),
panel.grid.minor = element_line(color = "grey20"),
# Optional: set legend theme to match
legend.background = element_rect(fill = "black"),
legend.text = element_text(color = "white"),
legend.title = element_text(color = "white")
)
ggplot(data,
aes(x= age +rnorm(n=sum(W=w),sd=.1),
y=polviews+rnorm(n=sum(W=w),sd=.1))) +
geom_point(size=2,color='#0085A1',alpha=0.3) +
facet_wrap(
vars(ifelse(w,'Controllo','Trattamento'))
) +
labs(title="Distribuzione dell'outcome in un contesto reale",
x="Age",
y="Polviews") +
theme(
# Set black background
plot.background = element_rect(fill = "#242728"),
panel.background = element_rect(fill = "#242728"),
# Set white text for all elements
text = element_text(color = "white"),
axis.text = element_text(color = "white"),
axis.title = element_text(color = "white"),
# Set green facet wrap labels
strip.background = element_rect(fill = "#0085A1"),
strip.text = element_text(color = "#eaeaea", face = "bold"),
# Optional: adjust grid lines for better visibility
panel.grid.major = element_line(color = "grey30"),
panel.grid.minor = element_line(color = "grey20"),
# Optional: set legend theme to match
legend.background = element_rect(fill = "black"),
legend.text = element_text(color = "white"),
legend.title = element_text(color = "white")
)
ggplot(data,
aes(x= age +rnorm(n=sum(W=w),sd=.1),
y=polviews+rnorm(n=sum(W=w),sd=.1))) +
geom_point(size=2,color='#0085A1',alpha=0.3) +
facet_wrap(
vars(ifelse(w,'Controllo','Trattamento'))
) +
labs(title="Distribuzione dell'outcome in un contesto reale",
x="Age",
y="Polviews") +
theme(
# Set black background
plot.background = element_rect(fill = "#242728"),
panel.background = element_rect(fill = "#242728"),
# Set white text for all elements
text = element_text(color = "#eaeaea"),
axis.text = element_text(color = "#eaeaea"),
axis.title = element_text(color = "#eaeaea"),
# Set green facet wrap labels
strip.background = element_rect(fill = "#0085A1"),
strip.text = element_text(color = "#eaeaea", face = "bold"),
# Optional: adjust grid lines for better visibility
panel.grid.major = element_line(color = "grey30"),
panel.grid.minor = element_line(color = "grey20"),
# Optional: set legend theme to match
legend.background = element_rect(fill = "#242728"),
legend.text = element_text(color = "#eaeaea"),
legend.title = element_text(color = "#eaeaea")
)
ggplot(data,
aes(x= age +rnorm(n=sum(W=w),sd=.1),
y=polviews+rnorm(n=sum(W=w),sd=.1))) +
geom_point(size=2,color='#0085A1',alpha=0.3) +
facet_wrap(
vars(ifelse(w,'Controllo','Trattamento'))
) +
labs(title="Distribuzione dell'outcome in un contesto reale",
x="Age",
y="Polviews") +
theme(
# Set black background
plot.background = element_rect(fill = "#242728"),
panel.background = element_rect(fill = "#242728"),
# Set white text for all elements
text = element_text(color = "#eaeaea"),
axis.text = element_text(color = "#eaeaea"),
axis.title = element_text(color = "#eaeaea"),
# Set green facet wrap labels
strip.background = element_rect(fill = "#0085A1"),
strip.text = element_text(color = "#eaeaea", face = "bold",size = 20),
# Optional: adjust grid lines for better visibility
panel.grid.major = element_line(color = "grey30"),
panel.grid.minor = element_line(color = "grey20"),
# Optional: set legend theme to match
legend.background = element_rect(fill = "#242728"),
legend.text = element_text(color = "#eaeaea"),
legend.title = element_text(color = "#eaeaea")
)
ggplot(data,
aes(x= age +rnorm(n=sum(W=w),sd=.1),
y=polviews+rnorm(n=sum(W=w),sd=.1))) +
geom_point(size=2,color='#0085A1',alpha=0.3) +
facet_wrap(
vars(ifelse(w,'Controllo','Trattamento'))
) +
labs(title="Distribuzione dell'outcome in un contesto reale",
x="Age",
y="Polviews") +
theme(
# Set black background
plot.background = element_rect(fill = "#242728"),
panel.background = element_rect(fill = "#242728"),
# Set white text for all elements
text = element_text(color = "#eaeaea"),
axis.text = element_text(color = "#eaeaea"),
axis.title = element_text(color = "#eaeaea"),
# Set green facet wrap labels
strip.background = element_rect(fill = "#0085A1"),
strip.text = element_text(color = "#eaeaea", face = "bold",size = 15),
# Optional: adjust grid lines for better visibility
panel.grid.major = element_line(color = "grey30"),
panel.grid.minor = element_line(color = "grey20"),
# Optional: set legend theme to match
legend.background = element_rect(fill = "#242728"),
legend.text = element_text(color = "#eaeaea"),
legend.title = element_text(color = "#eaeaea")
)
ggplot(data,
aes(x= age +rnorm(n=sum(W=w),sd=.1),
y=polviews+rnorm(n=sum(W=w),sd=.1))) +
geom_point(size=2,color='#0085A1',alpha=0.3) +
facet_wrap(
vars(ifelse(w,'Controllo','Trattamento'))
) +
labs(title="Distribuzione dell'outcome in un contesto reale",
x="Age",
y="Polviews") +
theme(
# Set black background
plot.background = element_rect(fill = "#242728"),
panel.background = element_rect(fill = "#242728"),
# Set white text for all elements
text = element_text(color = "#eaeaea"),
axis.text = element_text(color = "#eaeaea"),
axis.title = element_text(color = "#eaeaea"),
# Set green facet wrap labels
strip.background = element_rect(fill = "#0085A1"),
strip.text = element_text(color = "#eaeaea", face = "bold",size = 12),
# Optional: adjust grid lines for better visibility
panel.grid.major = element_line(color = "grey30"),
panel.grid.minor = element_line(color = "grey20"),
# Optional: set legend theme to match
legend.background = element_rect(fill = "#242728"),
legend.text = element_text(color = "#eaeaea"),
legend.title = element_text(color = "#eaeaea")
)
library(ggplot2)
library(latex2exp)
setwd("C:/Users/vcaminic/Desktop/github/notes/notebooks/Casual inference lectures")
# Read in data
data <- read.csv("welfare-small.csv")
ggplot(data,
aes(x= age +rnorm(n=sum(W=w),sd=.1),
y=polviews+rnorm(n=sum(W=w),sd=.1))) +
geom_point(size=2,color='#0085A1',alpha=0.3) +
facet_wrap(
vars(ifelse(w,'Controllo','Trattamento'))
) +
labs(title="Distribuzione dell'outcome in un contesto sperimentale",
subtitle = TeX('$Y_i(1), Y_i(0) \\perp W_i$'),
x="Age",
y="Polviews") +
theme(
# Set black background
plot.background = element_rect(fill = "#242728"),
panel.background = element_rect(fill = "#242728"),
# Set white text for all elements
text = element_text(color = "#eaeaea"),
axis.text = element_text(color = "#eaeaea"),
axis.title = element_text(color = "#eaeaea"),
# Set green facet wrap labels
strip.background = element_rect(fill = "#0085A1"),
strip.text = element_text(color = "#eaeaea", face = "bold",size = 12),
# Optional: adjust grid lines for better visibility
panel.grid.major = element_line(color = "grey30"),
panel.grid.minor = element_line(color = "grey20"),
# Optional: set legend theme to match
legend.background = element_rect(fill = "#242728"),
legend.text = element_text(color = "#eaeaea"),
legend.title = element_text(color = "#eaeaea")
)
# defining the group that will be dropped with some high probability
grp <- ((data$w == 1) &  # if treated AND...
(
(data$age > 45) |     # belongs an older group OR
(data$polviews < 5)   # more conservative
)) | # OR
((data$w == 0) &  # if untreated AND...
(
(data$age < 45) |     # belongs a younger group OR
(data$polviews > 4)   # more liberal
))
# Individuals in the group above have a smaller chance of being kept in the sample
prob.keep <- ifelse(grp, .15, .85)
keep.idx <- as.logical(rbinom(n=nrow(data), prob=prob.keep, size = 1))
# Dropping
data <- data[keep.idx,]
ggplot(data,
aes(x= age +rnorm(n=sum(W=w),sd=.1),
y=polviews+rnorm(n=sum(W=w),sd=.1))) +
geom_point(size=2,color='#0085A1',alpha=0.3) +
facet_wrap(
vars(ifelse(w,'Controllo','Trattamento'))
) +
labs(title="Distribuzione dell'outcome in un contesto reale",
x="Age",
y="Polviews") +
theme(
# Set black background
plot.background = element_rect(fill = "#242728"),
panel.background = element_rect(fill = "#242728"),
# Set white text for all elements
text = element_text(color = "#eaeaea"),
axis.text = element_text(color = "#eaeaea"),
axis.title = element_text(color = "#eaeaea"),
# Set green facet wrap labels
strip.background = element_rect(fill = "#0085A1"),
strip.text = element_text(color = "#eaeaea", face = "bold",size = 12),
# Optional: adjust grid lines for better visibility
panel.grid.major = element_line(color = "grey30"),
panel.grid.minor = element_line(color = "grey20"),
# Optional: set legend theme to match
legend.background = element_rect(fill = "#242728"),
legend.text = element_text(color = "#eaeaea"),
legend.title = element_text(color = "#eaeaea")
)
setwd("C:/Users/vcaminic/Desktop/github/notes/notebooks/Casual inference lectures")
# Read in data
data <- read.csv("welfare-small.csv")
ggplot(data,
aes(x= age +rnorm(n=sum(W=w),sd=.1),
y=polviews+rnorm(n=sum(W=w),sd=.1))) +
geom_point(size=2,color='#0085A1',alpha=0.3) +
facet_wrap(
vars(ifelse(w,'Controllo','Trattamento'))
) +
labs(title="Distribuzione dell'outcome in un contesto sperimentale",
subtitle = TeX('$Y_i(1), Y_i(0) \\perp W_i$'),
x="Age",
y="Polviews") +
theme(
# Set black background
plot.background = element_rect(fill = "#242728"),
panel.background = element_rect(fill = "#242728"),
# Set white text for all elements
text = element_text(color = "#eaeaea"),
axis.text = element_text(color = "#eaeaea"),
axis.title = element_text(color = "#eaeaea"),
# Set green facet wrap labels
strip.background = element_rect(fill = "#0085A1"),
strip.text = element_text(color = "#eaeaea", face = "bold",size = 12),
# Optional: adjust grid lines for better visibility
panel.grid.major = element_line(color = "grey30"),
panel.grid.minor = element_line(color = "grey20"),
# Optional: set legend theme to match
legend.background = element_rect(fill = "#242728"),
legend.text = element_text(color = "#eaeaea"),
legend.title = element_text(color = "#eaeaea"),
plot.subtitle = element_text(face = "italic")
)
ggplot(data,
aes(x= age +rnorm(n=sum(W=w),sd=.1),
y=polviews+rnorm(n=sum(W=w),sd=.1))) +
geom_point(size=2,color='#0085A1',alpha=0.3) +
facet_wrap(
vars(ifelse(w,'Controllo','Trattamento'))
) +
labs(title="Distribuzione dell'outcome in un contesto sperimentale",
subtitle = TeX('$Y_i(1), Y_i(0) \\perp W_i$'),
x="Age",
y="Polviews") +
theme(
# Set black background
plot.background = element_rect(fill = "#242728"),
panel.background = element_rect(fill = "#242728"),
# Set white text for all elements
text = element_text(color = "#eaeaea"),
axis.text = element_text(color = "#eaeaea"),
axis.title = element_text(color = "#eaeaea",face='italic'),
# Set green facet wrap labels
strip.background = element_rect(fill = "#0085A1"),
strip.text = element_text(color = "#eaeaea", face = "bold",size = 12),
# Optional: adjust grid lines for better visibility
panel.grid.major = element_line(color = "grey30"),
panel.grid.minor = element_line(color = "grey20"),
# Optional: set legend theme to match
legend.background = element_rect(fill = "#242728"),
legend.text = element_text(color = "#eaeaea"),
legend.title = element_text(color = "#eaeaea"),
)
library(ggplot2)
library(latex2exp)
options(warn=-1)
setwd("C:/Users/vcaminic/Desktop/github/notes/notebooks/Casual inference lectures")
# Read in data
data <- read.csv("welfare-small.csv")
ggplot(data,
aes(x= age +rnorm(n=sum(W=w),sd=.1),
y=polviews+rnorm(n=sum(W=w),sd=.1))) +
geom_point(size=2,color='#0085A1',alpha=0.3) +
facet_wrap(
vars(ifelse(w,'Controllo','Trattamento'))
) +
labs(title="Distribuzione dell'outcome in un contesto sperimentale",
subtitle = TeX('$Y_i(1), Y_i(0) \\perp W_i$'),
x="Age",
y="Polviews") +
theme(
# Set black background
plot.background = element_rect(fill = "#242728"),
panel.background = element_rect(fill = "#242728"),
# Set white text for all elements
text = element_text(color = "#eaeaea"),
axis.text = element_text(color = "#eaeaea"),
axis.title = element_text(color = "#eaeaea",face='italic'),
# Set green facet wrap labels
strip.background = element_rect(fill = "#0085A1"),
strip.text = element_text(color = "#eaeaea", face = "bold",size = 12),
# Optional: adjust grid lines for better visibility
panel.grid.major = element_line(color = "grey30"),
panel.grid.minor = element_line(color = "grey20"),
# Optional: set legend theme to match
legend.background = element_rect(fill = "#242728"),
legend.text = element_text(color = "#eaeaea"),
legend.title = element_text(color = "#eaeaea"),
)
# defining the group that will be dropped with some high probability
grp <- ((data$w == 1) &  # if treated AND...
(
(data$age > 45) |     # belongs an older group OR
(data$polviews < 5)   # more conservative
)) | # OR
((data$w == 0) &  # if untreated AND...
(
(data$age < 45) |     # belongs a younger group OR
(data$polviews > 4)   # more liberal
))
# Individuals in the group above have a smaller chance of being kept in the sample
prob.keep <- ifelse(grp, .15, .85)
keep.idx <- as.logical(rbinom(n=nrow(data), prob=prob.keep, size = 1))
# Dropping
data <- data[keep.idx,]
ggplot(data,
aes(x= age +rnorm(n=sum(W=w),sd=.1),
y=polviews+rnorm(n=sum(W=w),sd=.1))) +
geom_point(size=2,color='#0085A1',alpha=0.3) +
facet_wrap(
vars(ifelse(w,'Controllo','Trattamento'))
) +
labs(title="Distribuzione dell'outcome in un contesto reale",
x="Age",
y="Polviews") +
theme(
# Set black background
plot.background = element_rect(fill = "#242728"),
panel.background = element_rect(fill = "#242728"),
# Set white text for all elements
text = element_text(color = "#eaeaea"),
axis.text = element_text(color = "#eaeaea"),
axis.title = element_text(color = "#eaeaea"),
# Set green facet wrap labels
strip.background = element_rect(fill = "#0085A1"),
strip.text = element_text(color = "#eaeaea", face = "bold",size = 12),
# Optional: adjust grid lines for better visibility
panel.grid.major = element_line(color = "grey30"),
panel.grid.minor = element_line(color = "grey20"),
# Optional: set legend theme to match
legend.background = element_rect(fill = "#242728"),
legend.text = element_text(color = "#eaeaea"),
legend.title = element_text(color = "#eaeaea")
)
install.packages("rstudioapi")
install.packages("rstudioapi")
install.packages("rstudioapi")
install.packages("rstudioapi")
install.packages("rstudioapi")
install.packages("rstudioapi")
install.packages("rstudioapi")
install.packages("rstudioapi")
install.packages("rstudioapi")
install.packages("rstudioapi")
install.packages("rstudioapi")
install.packages("rstudioapi")
setwd(dirname(getSourceEditorContext()$path))
library(ggplot2)
library(latex2exp)
library(rstudioapi)
options(warn=-1)
setwd(dirname(getSourceEditorContext()$path))
setwd(dirname(getSourceEditorContext()$path))
dirname(rstudioapi::getSourceEditorContext()$path)
setwd(dirname(rstudioapi::getSourceEditorContext()$path))
# Read in data
data <- read.csv("welfare-small.csv")
ggplot(data,
aes(x= age +rnorm(n=sum(W=w),sd=.1),
y=polviews+rnorm(n=sum(W=w),sd=.1))) +
geom_point(size=2,color='#0085A1',alpha=0.3) +
facet_wrap(
vars(ifelse(w,'Controllo','Trattamento'))
) +
labs(title="Distribuzione dell'outcome in un contesto sperimentale",
subtitle = TeX('$Y_i(1), Y_i(0) \\perp W_i$'),
x="Age",
y="Polviews") +
theme(
# Set black background
plot.background = element_rect(fill = "#242728"),
panel.background = element_rect(fill = "#242728"),
# Set white text for all elements
text = element_text(color = "#eaeaea"),
axis.text = element_text(color = "#eaeaea"),
axis.title = element_text(color = "#eaeaea"),
title = element_text(face='italic'),
# Set green facet wrap labels
strip.background = element_rect(fill = "#0085A1"),
strip.text = element_text(color = "#eaeaea", face = "bold",size = 12),
# Optional: adjust grid lines for better visibility
panel.grid.major = element_line(color = "grey30"),
panel.grid.minor = element_line(color = "grey20"),
# Optional: set legend theme to match
legend.background = element_rect(fill = "#242728"),
legend.text = element_text(color = "#eaeaea"),
legend.title = element_text(color = "#eaeaea"),
)
ggplot(data,
aes(x= age +rnorm(n=sum(W=w),sd=.1),
y=polviews+rnorm(n=sum(W=w),sd=.1))) +
geom_point(size=2,color='#0085A1',alpha=0.3) +
facet_wrap(
vars(ifelse(w,'Controllo','Trattamento'))
) +
labs(title="Distribuzione dell'outcome in un contesto reale",
x="Age",
y="Polviews") +
theme(
# Set black background
plot.background = element_rect(fill = "#242728"),
panel.background = element_rect(fill = "#242728"),
# Set white text for all elements
text = element_text(color = "#eaeaea"),
axis.text = element_text(color = "#eaeaea"),
axis.title = element_text(color = "#eaeaea"),
title = element_text(face='italic'),
# Set green facet wrap labels
strip.background = element_rect(fill = "#0085A1"),
strip.text = element_text(color = "#eaeaea", face = "bold",size = 12),
# Optional: adjust grid lines for better visibility
panel.grid.major = element_line(color = "grey30"),
panel.grid.minor = element_line(color = "grey20"),
# Optional: set legend theme to match
legend.background = element_rect(fill = "#242728"),
legend.text = element_text(color = "#eaeaea"),
legend.title = element_text(color = "#eaeaea")
)
ggplot(data,
aes(x= age +rnorm(n=sum(W=w),sd=.1),
y=polviews+rnorm(n=sum(W=w),sd=.1))) +
geom_point(size=2,color='#0085A1',alpha=0.3) +
facet_wrap(
vars(ifelse(w,'Controllo','Trattamento'))
) +
labs(title="Distribuzione dell'outcome in un contesto sperimentale",
subtitle = TeX('$Y_i(1), Y_i(0) \\perp W_i$'),
x="Age",
y="Polviews") +
theme(
# Set black background
plot.background = element_rect(fill = "#242728"),
panel.background = element_rect(fill = "#242728"),
# Set white text for all elements
text = element_text(color = "#eaeaea"),
axis.text = element_text(color = "#eaeaea"),
axis.title = element_text(color = "#eaeaea"),
title = element_text(face='italic',size=13),
# Set green facet wrap labels
strip.background = element_rect(fill = "#0085A1"),
strip.text = element_text(color = "#eaeaea", face = "bold",size = 12),
# Optional: adjust grid lines for better visibility
panel.grid.major = element_line(color = "grey30"),
panel.grid.minor = element_line(color = "grey20"),
# Optional: set legend theme to match
legend.background = element_rect(fill = "#242728"),
legend.text = element_text(color = "#eaeaea"),
legend.title = element_text(color = "#eaeaea"),
)
